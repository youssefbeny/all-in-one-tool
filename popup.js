/*!
 * BSD 3-Clause License
 * Copyright (c) 2025, [Ben yedder]
 */
console.log("Gaming Tools Suite - Popup script loaded");

let currentActiveKey = 'Control';
let isResolutionActive = false;

// Initialiser immédiatement si le DOM est déjà chargé
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
} else {
    init();
}

function init() {
    console.log("Initializing popup...");
    setupTabNavigation();
    loadCurrentHotkey();
    setupTimerEventListeners();
    setupSubwayEventListeners();
    // NOUVEL APPEL POUR LA SÉLECTION DE VILLE
    setupSubwayCityEventListeners();
    // FIN NOUVEL APPEL
    setupZqsdEventListeners();
    setupResolutionEventListeners();
    setupThemeEventListeners();
    loadTheme();
    loadResolutionState();
    console.log("Popup initialized successfully");
}

// ================================
// TAB SYSTEM
// ================================

function setupTabNavigation() {
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const targetTab = button.dataset.tab;
            tabContents.forEach(content => content.classList.remove('active'));
            tabButtons.forEach(btn => btn.classList.remove('active'));
            document.getElementById(`${targetTab}-tab`).classList.add('active');
            button.classList.add('active');
        });
    });
}

// ================================
// SPEEDRUN TIMER FEATURES
// ================================

function loadCurrentHotkey() {
    chrome.runtime.sendMessage({ action: "getHotkey" }, (response) => {
        if (chrome.runtime.lastError) return;
        if (response && response.hotkey) {
            currentActiveKey = response.hotkey;
            updateHotkeyDisplay();
        }
    });
}

function updateHotkeyDisplay() {
    const display = document.getElementById('currentHotkeyDisplay');
    const hotkeyButtons = document.querySelectorAll('.hotkey-btn');
    
    if (display) {
        display.textContent = getKeyDisplayName(currentActiveKey);
    }
    
    hotkeyButtons.forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.key === currentActiveKey) {
            btn.classList.add('active');
        }
    });
}

function getKeyDisplayName(keyCode) {
    const keyNames = {
        'KeyT': 'T', 'KeyR': 'R', 'KeyQ': 'Q', 'KeyA': 'A', 'KeyS': 'S', 'KeyW': 'W',
        'KeyD': 'D', 'KeyF': 'F', 'KeyG': 'G', 'KeyH': 'H', 'KeyZ': 'Z', 'KeyX': 'X',
        'KeyC': 'C', 'KeyV': 'V', 'KeyB': 'B', 'KeyN': 'N', 'KeyM': 'M', 'KeyE': 'E',
        'KeyY': 'Y', 'KeyU': 'U', 'KeyI': 'I', 'KeyO': 'O', 'KeyP': 'P', 'KeyJ': 'J', 
        'KeyK': 'K', 'KeyL': 'L',
        'Digit1': '1', 'Digit2': '2', 'Digit3': '3', 'Digit4': '4', 'Digit5': '5', 
        'Digit6': '6', 'Digit7': '7', 'Digit8': '8', 'Digit9': '9', 'Digit0': '0',
        'Space': 'SPACE', 'Enter': 'ENTER', 'Control': 'CTRL', 'Shift': 'SHIFT',
        'Alt': 'ALT', 'Meta': 'META', 'Tab': 'TAB', 'Escape': 'ESC',
        'F1': 'F1', 'F2': 'F2', 'F3': 'F3', 'F4': 'F4', 'F5': 'F5', 'F6': 'F6',
        'F7': 'F7', 'F8': 'F8', 'F9': 'F9', 'F10': 'F10', 'F11': 'F11', 'F12': 'F12',
        'ArrowUp': 'Up', 'ArrowDown': 'Down', 'ArrowLeft': 'Left', 'ArrowRight': 'Right'
    };
    return keyNames[keyCode] || keyCode;
}

function setupTimerEventListeners() {
    const toggleTimerBtn = document.getElementById('toggleTimer');
    const hotkeyButtons = document.querySelectorAll('.hotkey-btn');
    const customKeyInput = document.getElementById('customKeyInput');

    if (toggleTimerBtn) {
        toggleTimerBtn.addEventListener('click', function() {
            addButtonFeedback(toggleTimerBtn);
            chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
                if (tabs[0]) {
                    chrome.tabs.sendMessage(tabs[0].id, { action: "toggleTimer" }, (response) => {
                        if (chrome.runtime.lastError) {
                            showStatus("Rechargez la page pour utiliser le timer", false);
                        } else {
                            showStatus("Timer basculé !", true);
                        }
                    });
                }
            });
        });
    }

    hotkeyButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            setHotkey(btn.dataset.key);
        });
    });

    if (customKeyInput) {
        customKeyInput.addEventListener('keydown', function(e) {
            e.preventDefault();
            let detectedKey = e.code;
            
            if (e.ctrlKey && !e.altKey && !e.metaKey && !e.shiftKey) {
                detectedKey = 'Control';
            } else if (e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey) {
                detectedKey = 'Shift';
            } else if (e.altKey && !e.ctrlKey && !e.metaKey && !e.shiftKey) {
                detectedKey = 'Alt';
            } else if (e.metaKey && !e.ctrlKey && !e.altKey && !e.shiftKey) {
                detectedKey = 'Meta';
            }
            
            if (isValidKey(detectedKey)) {
                customKeyInput.value = getKeyDisplayName(detectedKey);
                setHotkey(detectedKey);
            } else {
                showStatus("Touche non supportée", false);
            }
        });
    }
}

function isValidKey(keyCode) {
    const validKeys = [
        'KeyT', 'KeyR', 'KeyQ', 'KeyA', 'KeyS', 'KeyW', 'KeyD', 'KeyF', 'KeyG', 'KeyH',
        'KeyZ', 'KeyX', 'KeyC', 'KeyV', 'KeyB', 'KeyN', 'KeyM', 'KeyE', 'KeyY', 'KeyU',
        'KeyI', 'KeyO', 'KeyP', 'KeyJ', 'KeyK', 'KeyL', 'Digit1', 'Digit2', 'Digit3',
        'Digit4', 'Digit5', 'Digit6', 'Digit7', 'Digit8', 'Digit9', 'Digit0',
        'Space', 'Enter', 'Tab', 'Escape',
        'Control', 'Shift', 'Alt', 'Meta',
        'F1', 'F2', 'F3', 'F4', 'F5', 'F6', 'F7', 'F8', 'F9', 'F10', 'F11', 'F12',
        'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'
    ];
    return validKeys.includes(keyCode);
}

function setHotkey(keyCode) {
    chrome.runtime.sendMessage({ 
        action: "saveHotkey", 
        hotkey: keyCode 
    }, (response) => {
        if (chrome.runtime.lastError) return;
        if (response && response.success) {
            currentActiveKey = keyCode;
            updateHotkeyDisplay();
            showStatus(`Touche: ${getKeyDisplayName(keyCode)}`, true);
            chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
                if (tabs[0]) {
                    chrome.tabs.sendMessage(tabs[0].id, { 
                        action: "updateHotkey", 
                        hotkey: keyCode 
                    });
                }
            });
        }
    });
}

// ================================
// SUBWAY SURFERS FEATURES
// ================================

function setupSubwayEventListeners() {
    const backupBtn = document.getElementById('backup');
    const restoreBtn = document.getElementById('restore');
    const save100Btn = document.getElementById('save100');
    const cleanDataBtn = document.getElementById('cleanData');

    if (backupBtn) {
        backupBtn.addEventListener('click', function() {
            addButtonFeedback(backupBtn);
            doBackup();
        });
    }

    if (restoreBtn) {
        restoreBtn.addEventListener('click', function() {
            addButtonFeedback(restoreBtn);
            doRestore();
        });
    }

    if (save100Btn) {
        save100Btn.addEventListener('click', function() {
            addButtonFeedback(save100Btn);
            doSave100();
        });
    }

    if (cleanDataBtn) {
        cleanDataBtn.addEventListener('click', function() {
            addButtonFeedback(cleanDataBtn);
            doCleanData();
        });
    }
}

function doBackup() {
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
        if (!tabs[0]) {
            showStatus("Aucun onglet actif", false);
            return;
        }
        chrome.scripting.executeScript({
            target: { tabId: tabs[0].id },
            func: backupData
        }, (results) => {
            if (chrome.runtime.lastError) {
                showStatus("Erreur: Rechargez Subway Surfers", false);
            } else {
                showStatus("Backup créé !", true);
            }
        });
    });
}

function backupData() {
    if (typeof localStorage === 'undefined' || !localStorage.getItem('SaveData')) {
        return null;
    }
    const saveData = localStorage.getItem('SaveData');
    const blob = new Blob([saveData], { type: 'application/octet-stream' });
    const url = URL.createObjectURL(blob);
    const date = new Date().toISOString().slice(0, 10);
    chrome.downloads.download({
        url: url,
        filename: `SubwaySurfers_Backup_${date}.bin`,
        saveAs: true
    });
    return true;
}

function doRestore() {
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = '.bin';
    fileInput.onchange = function(event) {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
            const fileContent = e.target.result;
            chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
                if (!tabs[0]) {
                    showStatus("Aucun onglet actif", false);
                    return;
                }
                chrome.scripting.executeScript({
                    target: { tabId: tabs[0].id },
                    args: [fileContent],
                    func: restoreData
                }, (results) => {
                    if (chrome.runtime.lastError) {
                        showStatus("Erreur: Rechargez Subway Surfers", false);
                    } else {
                        showStatus("Restauré ! Rechargez.", true);
                    }
                });
            });
        };
        reader.readAsText(file);
    };
    fileInput.click();
}

function restoreData(data) {
    if (typeof localStorage !== 'undefined') {
        localStorage.setItem('SaveData', data);
        return true;
    }
    return false;
}

function doSave100() {
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
        if (!tabs[0]) {
            showStatus("Aucun onglet actif", false);
            return;
        }
        chrome.scripting.executeScript({
            target: { tabId: tabs[0].id },
            func: applySave100
        }, (results) => {
            if (chrome.runtime.lastError) {
                showStatus("Erreur: Rechargez Subway Surfers", false);
            } else {
                showStatus("100% appliqué ! Rechargez.", true);
            }
        });
    });
}

function applySave100() {
    const request = indexedDB.open("/idbfs");
    request.onsuccess = function (event) {
        const db = event.target.result;
        const transaction = db.transaction(["FILE_DATA"], "readwrite");
        const store = transaction.objectStore("FILE_DATA");
        
        // Ceci est le payload 100% (tronqué ici pour la lisibilité)
        const save100Data = {"timestamp": new Date(1759601884673), "mode": 33206, "contents": new Uint8Array([20, 0, 0, 0, 184, 192, 155, 241, 18, 6, 252, 30, 67, 105, 29, 56, 104, 105, 212, 64, 251, 30, 68, 64, 190, 45, 0, 0, 190, 45, 0, 0, 16, 111, 98, 102, 117, 115, 99, 97, 116, 101, 100, 67, 111, 105, 110, 115, 0, 144, 129, 127, 59, 16, 111, 98, 102, 117, 115, 99, 97, 116, 101, 100, 75, 101, 121, 115, 0, 241, 163, 125, 0, 16, 111, 98, 102, 117, 115, 99, 97, 116, 101, 100, 85, 110, 114, 101, 119, 97, 114, 100, 101, 100, 67, 111, 105, 110, 115, 0, 12, 0, 0, 0, 3, 112, 111, 119, 101, 114, 117, 112, 115, 0, 58, 0, 0, 0, 16, 104, 111, 118, 101, 114, 98, 111, 97, 114, 100, 0, 0, 0, 0, 0, 16, 104, 101, 97, 100, 115, 116, 97, 114, 116, 50, 48, 48, 48, 0, 55, 193, 154, 59, 16, 115, 99, 111, 114, 101, 98, 111, 111, 115, 116, 101, 114, 0, 0, 0, 0, 0, 0, 3, 117, 112, 103, 114, 97, 100, 101, 115, 0, 75, 0, 0, 0, 16, 106, 101, 116, 112, 97, 99, 107, 0, 0, 0, 0, 0, 16, 115, 117, 112, 101, 114, 115, 110, 101, 97, 107, 101, 114, 115, 0, 0, 0, 0, 0, 16, 99, 111, 105, 110, 109, 97, 103, 110, 101, 116, 0, 0, 0, 0, 0, 16, 100, 111, 117, 98, 108, 101, 77, 117, 108, 116, 105, 112, 108, 105, 101, 114, 0, 0, 0, 0, 0, 0, 4, 112, 101, 110, 100, 105, 110, 103, 82, 101, 119, 97, 114, 100, 115, 0, 5, 0, 0, 0, 0, 3, 98, 111, 97, 114, 100, 84, 104, 101, 109, 101, 68, 97, 116, 97, 0, 5, 0, 0, 0, 0, 4, 117, 110, 108, 111, 99, 107, 101, 100, 67, 104, 97, 114, 97, 99, 116, 101, 114, 115, 0, 134, 0, 0, 0, 2, 48, 0, 6, 0, 0, 0, 115, 108, 105, 99, 107, 0, 2, 49, 0, 7, 0, 0, 0, 102, 114, 105, 122, 122, 121, 0, 2, 50, 0, 8, 0, 0, 0, 112, 114, 105, 110, 99, 101, 107, 0, 2, 51, 0, 6, 0, 0, 0, 98, 114, 111, 100, 121, 0, 2, 52, 0, 4, 0, 0, 0, 122, 111, 101, 0, 2, 53, 0, 6, 0, 0, 0, 110, 105, 110, 106, 97, 0, 2, 54, 0, 4, 0, 0, 0, 116, 97, 103, 0, 2, 55, 0, 7, 0, 0, 0, 116, 114, 105, 99, 107, 121, 0, 2, 56, 0, 5, 0, 0, 0, 108, 117, 99, 121, 0, 2, 57, 0, 6, 0, 0, 0, 102, 114, 101, 115, 104, 0, 0, 3, 99, 111, 108, 108, 101, 99, 116, 101, 100, 67, 104, 97, 114, 97, 99, 116, 101, 114, 84, 111, 107, 101, 110, 115, 0, 51, 0, 0, 0, 16, 116, 114, 105, 99, 107, 121, 0, 2, 0, 0, 0, 16, 102, 114, 101, 115, 104, 0, 20, 9, 0, 0, 16, 121, 117, 116, 97, 110, 105, 0, 3, 0, 0, 0, 16, 115, 112, 105, 107, 101, 0, 16, 0, 0, 0, 0, 3, 115, 101, 108, 101, 99, 116, 101, 100, 79, 117, 116, 102, 105, 116, 115, 0, 69, 0, 0, 0, 16, 112, 114, 105, 110, 99, 101, 107, 0, 2, 0, 0, 0, 16, 122, 111, 101, 0, 2, 0, 0, 0, 16, 116, 97, 103, 0, 1, 0, 0, 0, 16, 116, 114, 105, 99, 107, 121, 0, 1, 0, 0, 0, 16, 108, 117, 99, 121, 0, 1, 0, 0, 0, 16, 102, 114, 101, 115, 104, 0, 1, 0, 0, 0, 0, 3, 117, 110, 108, 111, 99, 107, 101, 100, 79, 117, 116, 102, 105, 116, 115, 0, 162, 0, 0, 0, 4, 115, 108, 105, 99, 107, 0, 12, 0, 0, 0, 16, 48, 0, 1, 0, 0, 0, 0, 4, 112, 114, 105, 110, 99, 101, 107, 0, 12, 0, 0, 0, 16, 48, 0, 2, 0, 0, 0, 0, 4, 122, 111, 101, 0, 12, 0, 0, 0, 16, 48, 0, 2, 0, 0, 0, 0, 4, 116, 97, 103, 0, 12, 0, 0, 0, 16, 48, 0, 1, 0, 0, 0, 0, 4, 102, 114, 101, 115, 104, 0, 12, 0, 0, 0, 16, 48, 0, 1, 0, 0, 0, 0, 4, 116, 114, 105, 99, 107, 121, 0, 19, 0, 0, 0, 16, 48, 0, 2, 0, 0, 0, 16, 49, 0, 1, 0, 0, 0, 0, 4, 108, 117, 99, 121, 0, 12, 0, 0, 0, 16, 48, 0, 1, 0, 0, 0, 0, 4, 98, 114, 111, 100, 121, 0, 12, 0, 0, 0, 16, 48, 0, 1, 0, 0, 0, 0, 0, 4, 117, 110, 108, 111, 99, 107, 101, 100, 66, 111, 97, 114, 100, 115, 0, 22, 0, 0, 0, 2, 48, 0, 10, 0, 0, 0, 115, 116, 97, 114, 98, 111, 97, 114, 100, 0, 0, 4, 104, 97, 115, 83, 107, 105, 112, 112, 101, 100, 77, 105, 115, 115, 105, 111, 110, 115, 0, 17, 0, 0, 0, 8, 48, 0, 0, 8, 49, 0, 0, 8, 50, 0, 0, 0, 16, 114, 117, 110, 115, 67, 111, 109, 112, 108, 101, 116, 101, 100, 73, 110, 67, 117, 114, 114, 101, 110, 116, 77, 105, 115, 115, 105, 111, 110, 83, 101, 116, 0, 40, 3, 0, 0, 16, 99, 117, 114, 114, 101, 110, 116, 77, 105, 115, 115, 105, 111, 110, 83, 101, 116, 0, 1, 0, 0, 0, 4, 99, 117, 114, 114, 101, 110, 116, 77, 105, 115, 115, 105, 111, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 26, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 20, 0, 0, 0, 16, 50, 0, 2, 0, 0, 0, 0, 16, 109, 105, 115, 115, 105, 111, 110, 83, 101, 116, 67, 111, 109, 112, 108, 101, 116, 101, 100, 67, 111, 117, 110, 116, 0, 2, 0, 0, 0, 16, 99, 117, 114, 114, 101, 110, 116, 83, 107, 105, 112, 70, 111, 114, 86, 105, 100, 101, 111, 77, 105, 115, 115, 105, 111, 110, 73, 110, 100, 101, 120, 0, 0, 0, 0, 0, 9, 99, 117, 114, 114, 101, 110, 116, 83, 107, 105, 112, 70, 111, 114, 86, 105, 100, 101, 111, 73, 110, 100, 101, 120, 83, 101, 116, 65, 116, 0, 223, 143, 194, 174, 153, 1, 0, 0, 9, 108, 97, 115, 116, 84, 105, 109, 101, 77, 105, 115, 115, 105, 111, 110, 87, 97, 115, 83, 107, 105, 112, 112, 101, 100, 70, 111, 114, 86, 105, 100, 101, 111, 0, 128, 243, 119, 238, 124, 199, 255, 255, 8, 104, 97, 115, 83, 107, 105, 112, 112, 101, 100, 77, 105, 115, 115, 105, 111, 110, 70, 111, 114, 86, 105, 100, 101, 111, 84, 104, 105, 115, 83, 101, 116, 0, 0, 4, 97, 99, 104, 105, 101, 118, 101, 109, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 0, 5, 0, 0, 0, 0, 16, 117, 110, 114, 101, 112, 111, 114, 116, 101, 100, 71, 97, 109, 101, 115, 0, 0, 0, 0, 0, 9, 117, 110, 114, 101, 112, 111, 114, 116, 101, 100, 71, 97, 109, 101, 115, 84, 105, 109, 101, 83, 116, 97, 109, 112, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 104, 105, 103, 104, 83, 99, 111, 114, 101, 0, 193, 105, 130, 0, 4, 117, 110, 108, 111, 99, 107, 101, 100, 84, 114, 111, 112, 104, 105, 101, 115, 0, 37, 0, 0, 0, 8, 48, 0, 0, 8, 49, 0, 0, 8, 50, 0, 0, 8, 51, 0, 0, 8, 52, 0, 0, 8, 53, 0, 0, 8, 54, 0, 0, 8, 55, 0, 0, 0, 3, 97, 119, 97, 114, 100, 115, 80, 114, 111, 103, 114, 101, 115, 115, 0, 159, 15, 0, 0, 3, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 76, 65, 78, 69, 0, 238, 0, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 8, 0, 0, 0, 68, 105, 97, 109, 111, 110, 100, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 8, 0, 0, 0, 68, 105, 97, 109, 111, 110, 100, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 9, 0, 0, 0, 70, 105, 110, 105, 115, 104, 101, 100, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 9, 0, 0, 0, 70, 105, 110, 105, 115, 104, 101, 100, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 237, 186, 92, 53, 146, 1, 0, 0, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 5, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 0, 0, 3, 79, 80, 69, 78, 95, 88, 95, 83, 85, 80, 69, 82, 95, 77, 89, 83, 84, 69, 82, 89, 95, 66, 79, 88, 69, 83, 0, 13, 1, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 34, 0, 0, 0, 16, 83, 117, 112, 101, 114, 77, 121, 115, 116, 101, 114, 121, 66, 111, 120, 101, 115, 79, 112, 101, 110, 101, 100, 0, 0, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 1, 0, 3, 87, 73, 78, 95, 88, 95, 74, 65, 67, 75, 80, 79, 84, 83, 0, 1, 1, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 22, 0, 0, 0, 16, 74, 97, 99, 107, 112, 111, 116, 115, 87, 111, 110, 0, 0, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 1, 0, 3, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 95, 78, 79, 95, 74, 85, 77, 80, 95, 79, 82, 95, 82, 79, 76, 76, 0, 238, 0, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 8, 0, 0, 0, 68, 105, 97, 109, 111, 110, 100, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 8, 0, 0, 0, 68, 105, 97, 109, 111, 110, 100, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 9, 0, 0, 0, 70, 105, 110, 105, 115, 104, 101, 100, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 9, 0, 0, 0, 70, 105, 110, 105, 115, 104, 101, 100, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 22, 220, 92, 53, 146, 1, 0, 0, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 5, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 0, 0, 3, 79, 80, 69, 78, 95, 88, 95, 77, 89, 83, 84, 69, 82, 89, 95, 66, 79, 88, 69, 83, 0, 9, 1, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 83, 105, 108, 118, 101, 114, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 12, 0, 0, 0, 67, 111, 108, 108, 101, 99, 116, 105, 98, 108, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 218, 173, 20, 99, 146, 1, 0, 0, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 29, 0, 0, 0, 16, 77, 121, 115, 116, 101, 114, 121, 66, 111, 120, 101, 115, 79, 112, 101, 110, 101, 100, 0, 20, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 1, 0, 3, 80, 73, 67, 75, 95, 88, 95, 75, 69, 89, 83, 95, 73, 78, 71, 65, 77, 69, 0, 3, 1, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 24, 0, 0, 0, 16, 75, 101, 121, 115, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 0, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 1, 0, 3, 67, 79, 76, 76, 69, 67, 84, 95, 67, 79, 73, 78, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 0, 240, 0, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 5, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 0, 0, 3, 72, 65, 86, 69, 95, 83, 85, 80, 69, 82, 83, 78, 73, 67, 75, 69, 82, 83, 95, 65, 67, 84, 73, 86, 69, 95, 88, 95, 77, 73, 78, 95, 73, 78, 95, 65, 95, 82, 79, 87, 0, 240, 0, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 5, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 0, 0, 3, 67, 79, 77, 80, 76, 69, 84, 69, 95, 77, 73, 83, 83, 73, 79, 78, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 0, 240, 0, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 83, 105, 108, 118, 101, 114, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 83, 105, 108, 118, 101, 114, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 130, 36, 67, 48, 146, 1, 0, 0, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 5, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 0, 0, 3, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 95, 78, 79, 95, 67, 79, 73, 78, 83, 0, 238, 0, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 8, 0, 0, 0, 68, 105, 97, 109, 111, 110, 100, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 8, 0, 0, 0, 68, 105, 97, 109, 111, 110, 100, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 9, 0, 0, 0, 70, 105, 110, 105, 115, 104, 101, 100, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 9, 0, 0, 0, 70, 105, 110, 105, 115, 104, 101, 100, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 251, 13, 93, 53, 146, 1, 0, 0, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 5, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 0, 0, 3, 80, 73, 67, 75, 85, 80, 95, 80, 79, 87, 69, 82, 85, 80, 83, 0, 4, 1, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 83, 105, 108, 118, 101, 114, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 12, 0, 0, 0, 67, 111, 108, 108, 101, 99, 116, 105, 98, 108, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 104, 170, 29, 99, 146, 1, 0, 0, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 24, 0, 0, 0, 16, 80, 105, 99, 107, 117, 112, 80, 111, 119, 101, 114, 117, 112, 0, 100, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 1, 0, 3, 67, 79, 77, 80, 76, 69, 84, 69, 95, 88, 95, 77, 73, 83, 83, 73, 79, 78, 83, 0, 6, 1, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 27, 0, 0, 0, 16, 77, 105, 115, 115, 105, 111, 110, 67, 111, 109, 112, 108, 101, 116, 101, 100, 0, 0, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 1, 0, 3, 67, 79, 76, 76, 69, 67, 84, 95, 79, 76, 68, 95, 84, 82, 79, 80, 72, 89, 95, 73, 84, 69, 77, 83, 95, 77, 66, 0, 48, 1, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 69, 0, 0, 0, 16, 71, 111, 108, 100, 67, 104, 97, 105, 110, 67, 108, 111, 99, 107, 0, 0, 0, 0, 0, 16, 72, 101, 97, 100, 112, 104, 111, 110, 101, 115, 0, 0, 0, 0, 0, 16, 84, 97, 112, 101, 66, 108, 97, 99, 107, 0, 0, 0, 0, 0, 16, 76, 112, 66, 108, 97, 99, 107, 0, 0, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 1, 0, 3, 67, 79, 76, 76, 69, 67, 84, 95, 79, 76, 68, 95, 84, 82, 79, 80, 72, 89, 95, 73, 84, 69, 77, 83, 95, 83, 77, 66, 0, 46, 1, 0, 0, 2, 97, 99, 116, 105, 118, 101, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 112, 114, 111, 103, 114, 101, 115, 115, 84, 105, 101, 114, 84, 121, 112, 101, 0, 7, 0, 0, 0, 66, 114, 111, 110, 122, 101, 0, 2, 99, 117, 114, 114, 101, 110, 116, 65, 99, 116, 105, 118, 101, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 99, 117, 114, 114, 101, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 65, 119, 97, 114, 100, 83, 116, 97, 116, 101, 0, 11, 0, 0, 0, 73, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 9, 108, 97, 115, 116, 65, 99, 116, 105, 118, 101, 83, 116, 97, 116, 101, 67, 104, 97, 110, 103, 101, 68, 97, 116, 101, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 111, 102, 102, 115, 101, 116, 0, 255, 255, 255, 255, 3, 115, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 67, 0, 0, 0, 16, 71, 111, 108, 100, 67, 104, 97, 105, 110, 68, 111, 108, 108, 97, 114, 0, 0, 0, 0, 0, 16, 71, 111, 108, 100, 83, 107, 117, 108, 108, 0, 0, 0, 0, 0, 16, 71, 111, 108, 100, 98, 97, 114, 0, 0, 0, 0, 0, 16, 68, 105, 97, 109, 111, 110, 100, 0, 0, 0, 0, 0, 0, 8, 104, 97, 115, 77, 105, 103, 114, 97, 116, 101, 100, 84, 111, 85, 115, 101, 83, 116, 97, 116, 79, 102, 102, 115, 101, 116, 0, 1, 0, 0, 9, 119, 101, 101, 107, 108, 121, 71, 105, 102, 116, 85, 110, 108, 111, 99, 107, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 4, 115, 116, 97, 116, 86, 97, 108, 117, 101, 115, 0, 35, 1, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 0, 0, 0, 0, 16, 50, 0, 0, 0, 0, 0, 16, 51, 0, 0, 0, 0, 0, 16, 52, 0, 0, 0, 0, 0, 16, 53, 0, 0, 0, 0, 0, 16, 54, 0, 0, 0, 0, 0, 16, 55, 0, 0, 0, 0, 0, 16, 56, 0, 1, 0, 0, 0, 16, 57, 0, 0, 0, 0, 0, 16, 49, 48, 0, 0, 0, 0, 0, 16, 49, 49, 0, 0, 0, 0, 0, 16, 49, 50, 0, 0, 0, 0, 0, 16, 49, 51, 0, 5, 0, 0, 0, 16, 49, 52, 0, 0, 0, 0, 0, 16, 49, 53, 0, 0, 0, 0, 0, 16, 49, 54, 0, 0, 0, 0, 0, 16, 49, 55, 0, 0, 0, 0, 0, 16, 49, 56, 0, 0, 0, 0, 0, 16, 49, 57, 0, 0, 0, 0, 0, 16, 50, 48, 0, 0, 0, 0, 0, 16, 50, 49, 0, 0, 0, 0, 0, 16, 50, 50, 0, 0, 0, 0, 0, 16, 50, 51, 0, 0, 0, 0, 0, 16, 50, 52, 0, 0, 0, 0, 0, 16, 50, 53, 0, 11, 3, 0, 0, 16, 50, 54, 0, 0, 0, 0, 0, 16, 50, 55, 0, 3, 0, 0, 0, 16, 50, 56, 0, 0, 0, 0, 0, 16, 50, 57, 0, 70, 0, 0, 0, 16, 51, 48, 0, 0, 0, 0, 0, 16, 51, 49, 0, 0, 0, 0, 0, 16, 51, 50, 0, 0, 0, 0, 0, 16, 51, 51, 0, 0, 0, 0, 0, 16, 51, 52, 0, 0, 0, 0, 0, 16, 51, 53, 0, 0, 0, 0, 0, 16, 51, 54, 0, 0, 0, 0, 0, 0, 4, 109, 121, 115, 116, 101, 114, 121, 66, 111, 120, 101, 115, 79, 112, 101, 110, 101, 100, 0, 26, 0, 0, 0, 16, 48, 0, 69, 0, 0, 0, 16, 49, 0, 0, 0, 0, 0, 16, 50, 0, 0, 0, 0, 0, 0, 16, 99, 111, 109, 112, 108, 101, 116, 101, 100, 82, 117, 110, 67, 111, 117, 110, 116, 0, 128, 3, 0, 0, 2, 99, 117, 114, 114, 101, 110, 116, 67, 104, 97, 114, 97, 99, 116, 101, 114, 73, 100, 0, 6, 0, 0, 0, 110, 105, 110, 106, 97, 0, 2, 99, 117, 114, 114, 101, 110, 116, 66, 111, 97, 114, 100, 73, 100, 0, 7, 0, 0, 0, 110, 111, 114, 109, 97, 108, 0, 2, 112, 114, 101, 118, 105, 111, 117, 115, 66, 111, 97, 114, 100, 73, 100, 0, 7, 0, 0, 0, 110, 111, 114, 109, 97, 108, 0, 3, 97, 119, 97, 114, 100, 73, 115, 78, 101, 119, 0, 145, 1, 0, 0, 8, 67, 79, 76, 76, 69, 67, 84, 95, 79, 76, 68, 95, 84, 82, 79, 80, 72, 89, 95, 73, 84, 69, 77, 83, 95, 77, 66, 0, 0, 8, 67, 79, 76, 76, 69, 67, 84, 95, 79, 76, 68, 95, 84, 82, 79, 80, 72, 89, 95, 73, 84, 69, 77, 83, 95, 83, 77, 66, 0, 0, 8, 67, 79, 77, 80, 76, 69, 84, 69, 95, 88, 95, 77, 73, 83, 83, 73, 79, 78, 83, 0, 0, 8, 80, 73, 67, 75, 85, 80, 95, 80, 79, 87, 69, 82, 85, 80, 83, 0, 0, 8, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 95, 78, 79, 95, 67, 79, 73, 78, 83, 0, 0, 8, 67, 79, 77, 80, 76, 69, 84, 69, 95, 77, 73, 83, 83, 73, 79, 78, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 0, 0, 8, 72, 65, 86, 69, 95, 83, 85, 80, 69, 82, 83, 78, 73, 67, 75, 69, 82, 83, 95, 65, 67, 84, 73, 86, 69, 95, 88, 95, 77, 73, 78, 95, 73, 78, 95, 65, 95, 82, 79, 87, 0, 0, 8, 67, 79, 76, 76, 69, 67, 84, 95, 67, 79, 73, 78, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 0, 0, 8, 80, 73, 67, 75, 95, 88, 95, 75, 69, 89, 83, 95, 73, 78, 71, 65, 77, 69, 0, 0, 8, 79, 80, 69, 78, 95, 88, 95, 77, 89, 83, 84, 69, 82, 89, 95, 66, 79, 88, 69, 83, 0, 0, 8, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 95, 78, 79, 95, 74, 85, 77, 80, 95, 79, 82, 95, 82, 79, 76, 76, 0, 0, 8, 87, 73, 78, 95, 88, 95, 74, 65, 67, 75, 80, 79, 84, 83, 0, 0, 8, 79, 80, 69, 78, 95, 88, 95, 83, 85, 80, 69, 82, 95, 77, 89, 83, 84, 69, 82, 89, 95, 66, 79, 88, 69, 83, 0, 0, 8, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 76, 65, 78, 69, 0, 0, 0, 3, 97, 119, 97, 114, 100, 72, 97, 115, 80, 97, 121, 101, 100, 79, 117, 116, 0, 145, 1, 0, 0, 8, 67, 79, 76, 76, 69, 67, 84, 95, 79, 76, 68, 95, 84, 82, 79, 80, 72, 89, 95, 73, 84, 69, 77, 83, 95, 77, 66, 0, 0, 8, 67, 79, 76, 76, 69, 67, 84, 95, 79, 76, 68, 95, 84, 82, 79, 80, 72, 89, 95, 73, 84, 69, 77, 83, 95, 83, 77, 66, 0, 0, 8, 67, 79, 77, 80, 76, 69, 84, 69, 95, 88, 95, 77, 73, 83, 83, 73, 79, 78, 83, 0, 0, 8, 80, 73, 67, 75, 85, 80, 95, 80, 79, 87, 69, 82, 85, 80, 83, 0, 0, 8, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 95, 78, 79, 95, 67, 79, 73, 78, 83, 0, 1, 8, 67, 79, 77, 80, 76, 69, 84, 69, 95, 77, 73, 83, 83, 73, 79, 78, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 0, 1, 8, 72, 65, 86, 69, 95, 83, 85, 80, 69, 82, 83, 78, 73, 67, 75, 69, 82, 83, 95, 65, 67, 84, 73, 86, 69, 95, 88, 95, 77, 73, 78, 95, 73, 78, 95, 65, 95, 82, 79, 87, 0, 0, 8, 67, 79, 76, 76, 69, 67, 84, 95, 67, 79, 73, 78, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 0, 0, 8, 80, 73, 67, 75, 95, 88, 95, 75, 69, 89, 83, 95, 73, 78, 71, 65, 77, 69, 0, 0, 8, 79, 80, 69, 78, 95, 88, 95, 77, 89, 83, 84, 69, 82, 89, 95, 66, 79, 88, 69, 83, 0, 0, 8, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 82, 85, 78, 95, 78, 79, 95, 74, 85, 77, 80, 95, 79, 82, 95, 82, 79, 76, 76, 0, 1, 8, 87, 73, 78, 95, 88, 95, 74, 65, 67, 75, 80, 79, 84, 83, 0, 0, 8, 79, 80, 69, 78, 95, 88, 95, 83, 85, 80, 69, 82, 95, 77, 89, 83, 84, 69, 82, 89, 95, 66, 79, 88, 69, 83, 0, 0, 8, 83, 67, 79, 82, 69, 95, 80, 79, 73, 78, 84, 83, 95, 83, 73, 78, 71, 76, 69, 95, 76, 65, 78, 69, 0, 1, 0, 8, 97, 119, 97, 114, 100, 115, 70, 105, 114, 115, 116, 76, 111, 97, 100, 101, 100, 0, 1, 2, 119, 101, 101, 107, 108, 121, 72, 117, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 86, 101, 114, 115, 105, 111, 110, 0, 4, 0, 0, 0, 49, 46, 48, 0, 4, 104, 97, 115, 76, 111, 103, 103, 101, 100, 87, 101, 101, 107, 108, 121, 72, 117, 110, 116, 80, 101, 114, 105, 111, 100, 0, 21, 0, 0, 0, 8, 48, 0, 1, 8, 49, 0, 1, 8, 50, 0, 1, 8, 51, 0, 1, 0, 3, 119, 101, 101, 107, 108, 121, 72, 117, 110, 116, 80, 114, 111, 103, 114, 101, 115, 115, 68, 97, 116, 97, 0, 95, 0, 0, 0, 2, 104, 117, 110, 116, 83, 116, 97, 114, 116, 86, 101, 114, 115, 105, 111, 110, 0, 20, 0, 0, 0, 48, 57, 47, 49, 51, 47, 50, 48, 49, 56, 32, 48, 48, 58, 48, 48, 58, 48, 48, 0, 4, 116, 111, 107, 101, 110, 80, 114, 111, 103, 114, 101, 115, 115, 0, 33, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 0, 0, 0, 0, 16, 50, 0, 0, 0, 0, 0, 16, 51, 0, 0, 0, 0, 0, 0, 0, 16, 119, 111, 114, 100, 72, 117, 110, 116, 87, 111, 114, 100, 115, 73, 110, 82, 111, 119, 0, 2, 0, 0, 0, 8, 119, 111, 114, 100, 72, 117, 110, 116, 80, 97, 121, 101, 100, 79, 117, 116, 0, 1, 16, 119, 111, 114, 100, 72, 117, 110, 116, 85, 110, 108, 111, 99, 107, 101, 100, 77, 97, 115, 107, 0, 31, 0, 0, 0, 16, 119, 111, 114, 100, 72, 117, 110, 116, 76, 97, 115, 116, 80, 97, 121, 111, 117, 116, 68, 97, 121, 79, 102, 89, 101, 97, 114, 0, 21, 1, 0, 0, 3, 99, 104, 97, 114, 97, 99, 116, 101, 114, 78, 97, 109, 101, 69, 118, 101, 110, 116, 68, 97, 116, 97, 0, 221, 0, 0, 0, 2, 99, 117, 114, 114, 101, 110, 116, 67, 104, 97, 114, 97, 99, 116, 101, 114, 0, 6, 0, 0, 0, 115, 108, 105, 99, 107, 0, 16, 99, 111, 108, 108, 101, 99, 116, 101, 100, 76, 101, 116, 116, 101, 114, 73, 110, 100, 101, 120, 0, 255, 255, 255, 255, 16, 115, 107, 105, 112, 112, 101, 100, 67, 104, 97, 114, 97, 99, 116, 101, 114, 115, 0, 0, 0, 0, 0, 8, 119, 97, 115, 76, 97, 115, 116, 67, 104, 97, 114, 97, 99, 116, 101, 114, 67, 111, 109, 112, 108, 101, 116, 101, 100, 0, 0, 16, 99, 111, 109, 112, 108, 101, 116, 101, 100, 67, 104, 97, 114, 97, 99, 116, 101, 114, 115, 0, 0, 0, 0, 0, 4, 99, 104, 97, 114, 97, 99, 116, 101, 114, 115, 76, 105, 115, 116, 0, 5, 0, 0, 0, 0, 4, 99, 97, 116, 101, 103, 111, 114, 121, 87, 111, 114, 100, 115, 76, 105, 115, 116, 0, 5, 0, 0, 0, 0, 18, 101, 118, 101, 110, 116, 73, 68, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 101, 118, 101, 110, 116, 67, 97, 116, 101, 103, 111, 114, 121, 0, 5, 0, 0, 0, 67, 97, 116, 49, 0, 0, 18, 108, 97, 115, 116, 69, 118, 101, 110, 116, 73, 68, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, 108, 97, 115, 116, 84, 105, 109, 101, 65, 110, 69, 118, 101, 110, 116, 72, 97, 115, 66, 101, 101, 110, 84, 114, 105, 101, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, 108, 97, 115, 116, 84, 105, 109, 101, 65, 110, 69, 118, 101, 110, 116, 87, 97, 115, 83, 116, 97, 114, 116, 101, 100, 0, 213, 111, 239, 102, 0, 0, 0, 0, 18, 108, 97, 115, 116, 84, 105, 109, 101, 69, 118, 101, 110, 116, 80, 111, 112, 117, 112, 87, 97, 115, 70, 111, 114, 99, 101, 83, 104, 111, 119, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 108, 97, 115, 116, 69, 118, 101, 110, 116, 73, 116, 101, 109, 73, 68, 0, 1, 0, 0, 0, 0, 8, 115, 104, 111, 117, 108, 100, 82, 101, 115, 116, 111, 114, 101, 73, 116, 101, 109, 65, 102, 116, 101, 114, 69, 118, 101, 110, 116, 0, 0, 2, 119, 111, 114, 100, 72, 117, 110, 116, 68, 97, 105, 108, 121, 87, 111, 114, 100, 0, 6, 0, 0, 0, 67, 72, 65, 83, 69, 0, 9, 119, 111, 114, 100, 72, 117, 110, 116, 69, 120, 112, 105, 114, 101, 84, 105, 109, 101, 0, 95, 6, 171, 177, 153, 1, 0, 0, 2, 115, 121, 98, 111, 65, 110, 97, 108, 121, 116, 105, 99, 115, 83, 97, 109, 112, 108, 101, 83, 116, 97, 116, 101, 0, 10, 0, 0, 0, 85, 110, 115, 97, 109, 112, 108, 101, 100, 0, 2, 115, 121, 98, 111, 65, 110, 97, 108, 121, 116, 105, 99, 115, 85, 115, 101, 114, 73, 100, 0, 1, 0, 0, 0, 0, 2, 115, 121, 98, 111, 65, 103, 103, 114, 101, 103, 97, 116, 101, 100, 68, 97, 116, 97, 83, 116, 114, 105, 110, 103, 0, 1, 0, 0, 0, 0, 3, 115, 121, 98, 111, 65, 110, 97, 108, 121, 116, 105, 99, 115, 85, 110, 104, 97, 110, 100, 108, 101, 100, 65, 98, 84, 101, 115, 116, 68, 97, 116, 97, 0, 5, 0, 0, 0, 0, 16, 115, 121, 98, 111, 65, 110, 97, 108, 121, 116, 105, 99, 115, 67, 117, 114, 114, 101, 110, 116, 83, 101, 115, 115, 105, 111, 110, 0, 255, 255, 255, 255, 8, 107, 105, 108, 111, 111, 65, 110, 97, 108, 121, 116, 105, 99, 115, 72, 97, 115, 76, 111, 103, 103, 101, 100, 83, 121, 98, 111, 85, 115, 101, 114, 73, 100, 0, 0, 16, 112, 101, 114, 115, 105, 115, 116, 101, 100, 83, 101, 115, 115, 105, 111, 110, 69, 118, 101, 110, 116, 78, 117, 109, 98, 101, 114, 0, 255, 255, 255, 255, 3, 109, 97, 110, 97, 103, 101, 114, 68, 97, 116, 97, 0, 111, 0, 0, 0, 9, 108, 97, 115, 116, 83, 117, 98, 109, 105, 116, 116, 101, 100, 83, 99, 111, 114, 101, 83, 116, 97, 114, 116, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 9, 108, 97, 115, 116, 83, 117, 98, 109, 105, 116, 116, 101, 100, 83, 99, 111, 114, 101, 69, 110, 100, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 117, 110, 115, 117, 98, 109, 105, 116, 116, 101, 100, 83, 99, 111, 114, 101, 78, 111, 84, 111, 117, 114, 110, 97, 109, 101, 110, 116, 0, 0, 0, 0, 0, 0, 2, 108, 97, 115, 116, 84, 111, 112, 82, 117, 110, 82, 101, 115, 117, 108, 116, 65, 119, 97, 114, 100, 101, 100, 73, 68, 0, 1, 0, 0, 0, 0, 2, 112, 101, 110, 100, 105, 110, 103, 84, 111, 112, 82, 117, 110, 82, 101, 115, 117, 108, 116, 73, 68, 0, 1, 0, 0, 0, 0, 16, 112, 101, 110, 100, 105, 110, 103, 84, 111, 112, 82, 117, 110, 82, 101, 115, 117, 108, 116, 115, 83, 99, 111, 114, 101, 0, 255, 255, 255, 255, 16, 112, 101, 110, 100, 105, 110, 103, 84, 111, 112, 82, 117, 110, 82, 101, 115, 117, 108, 116, 115, 82, 97, 110, 107, 0, 255, 255, 255, 255, 16, 112, 101, 110, 100, 105, 110, 103, 84, 111, 112, 82, 117, 110, 82, 101, 115, 117, 108, 116, 115, 87, 101, 101, 107, 0, 255, 255, 255, 255, 16, 112, 101, 110, 100, 105, 110, 103, 84, 111, 112, 82, 117, 110, 66, 101, 97, 116, 101, 110, 70, 114, 105, 101, 110, 100, 115, 65, 119, 97, 114, 100, 0, 0, 0, 0, 0, 8, 98, 101, 104, 97, 118, 105, 111, 114, 97, 108, 65, 100, 115, 65, 108, 108, 111, 119, 101, 100, 0, 1, 3, 105, 110, 116, 101, 114, 115, 116, 105, 116, 105, 97, 108, 83, 116, 97, 116, 115, 0, 159, 0, 0, 0, 3, 108, 105, 115, 116, 86, 101, 114, 115, 105, 111, 110, 70, 111, 114, 73, 68, 0, 41, 0, 0, 0, 2, 104, 111, 109, 101, 95, 105, 110, 116, 101, 114, 115, 116, 105, 116, 105, 97, 108, 115, 95, 108, 105, 115, 116, 0, 7, 0, 0, 0, 110, 111, 116, 115, 101, 116, 0, 0, 16, 115, 101, 101, 110, 84, 104, 105, 115, 72, 111, 117, 114, 0, 1, 0, 0, 0, 16, 99, 117, 114, 114, 101, 110, 116, 72, 111, 117, 114, 0, 178, 210, 14, 1, 16, 115, 101, 101, 110, 84, 104, 105, 115, 68, 97, 121, 0, 1, 0, 0, 0, 16, 99, 117, 114, 114, 101, 110, 116, 68, 97, 121, 0, 199, 72, 11, 0, 8, 104, 97, 115, 83, 101, 101, 110, 70, 105, 114, 115, 116, 73, 110, 116, 101, 114, 115, 116, 105, 116, 105, 97, 108, 0, 0, 0, 3, 99, 111, 110, 115, 117, 109, 97, 98, 108, 101, 83, 101, 101, 110, 86, 105, 100, 101, 111, 115, 67, 111, 117, 110, 116, 0, 5, 0, 0, 0, 0, 3, 99, 111, 110, 115, 117, 109, 97, 98, 108, 101, 86, 105, 100, 101, 111, 83, 101, 101, 110, 65, 116, 0, 5, 0, 0, 0, 0, 3, 99, 111, 111, 108, 100, 111, 119, 110, 115, 0, 27, 0, 0, 0, 3, 97, 99, 116, 105, 118, 101, 67, 111, 111, 108, 100, 111, 119, 110, 115, 0, 5, 0, 0, 0, 0, 0, 16, 105, 110, 65, 112, 112, 76, 101, 103, 97, 99, 121, 80, 117, 114, 99, 104, 97, 115, 101, 67, 111, 117, 110, 116, 0, 0, 0, 0, 0, 16, 105, 110, 65, 112, 112, 67, 111, 110, 115, 117, 109, 97, 98, 108, 101, 80, 117, 114, 99, 104, 97, 115, 101, 67, 111, 117, 110, 116, 0, 0, 0, 0, 0, 16, 105, 110, 65, 112, 112, 82, 101, 115, 116, 111, 114, 101, 100, 80, 117, 114, 99, 104, 97, 115, 101, 67, 111, 117, 110, 116, 0, 0, 0, 0, 0, 16, 105, 110, 65, 112, 112, 78, 111, 110, 67, 111, 110, 115, 117, 109, 97, 98, 108, 101, 80, 117, 114, 99, 104, 97, 115, 101, 67, 111, 117, 110, 116, 0, 0, 0, 0, 0, 8, 105, 115, 70, 114, 101, 115, 104, 73, 110, 115, 116, 97, 108, 108, 0, 1, 8, 104, 97, 115, 85, 115, 101, 114, 82, 117, 110, 65, 112, 112, 66, 101, 102, 111, 114, 101, 0, 1, 9, 108, 97, 115, 116, 68, 97, 105, 108, 121, 79, 110, 108, 105, 110, 101, 76, 111, 103, 0, 128, 243, 119, 238, 124, 199, 255, 255, 9, 108, 97, 115, 116, 80, 108, 97, 121, 68, 97, 116, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 9, 108, 97, 115, 116, 81, 117, 105, 116, 68, 97, 116, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 2, 108, 97, 115, 116, 80, 117, 114, 99, 104, 97, 115, 101, 100, 66, 117, 110, 100, 108, 101, 0, 5, 0, 0, 0, 78, 111, 110, 101, 0, 8, 104, 97, 115, 80, 97, 105, 100, 79, 117, 116, 70, 97, 99, 101, 98, 111, 111, 107, 82, 101, 119, 97, 114, 100, 0, 0, 8, 104, 97, 115, 83, 101, 101, 110, 70, 114, 111, 110, 116, 83, 99, 114, 101, 101, 110, 70, 105, 114, 115, 116, 84, 105, 109, 101, 0, 1, 8, 104, 97, 115, 77, 97, 100, 101, 79, 110, 101, 86, 97, 108, 105, 100, 80, 117, 114, 99, 104, 97, 115, 101, 0, 0, 2, 102, 105, 114, 115, 116, 73, 110, 115, 116, 97, 108, 108, 101, 100, 86, 101, 114, 115, 105, 111, 110, 0, 1, 0, 0, 0, 0, 9, 102, 105, 114, 115, 116, 73, 110, 115, 116, 97, 108, 108, 68, 97, 116, 101, 0, 54, 218, 76, 23, 146, 1, 0, 0, 8, 104, 97, 115, 68, 111, 117, 98, 108, 101, 67, 111, 105, 110, 115, 85, 112, 103, 114, 97, 100, 101, 0, 0, 8, 104, 97, 115, 65, 100, 82, 101, 109, 111, 118, 97, 108, 85, 112, 103, 114, 97, 100, 101, 0, 0, 3, 104, 97, 115, 67, 104, 97, 114, 97, 99, 116, 101, 114, 66, 101, 101, 110, 83, 101, 101, 110, 0, 5, 0, 0, 0, 0, 3, 104, 97, 115, 66, 111, 97, 114, 100, 66, 101, 101, 110, 83, 101, 101, 110, 0, 5, 0, 0, 0, 0, 3, 99, 104, 97, 114, 97, 99, 116, 101, 114, 79, 117, 116, 102, 105, 116, 115, 83, 101, 101, 110, 0, 83, 1, 0, 0, 4, 110, 105, 110, 106, 97, 0, 12, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 0, 4, 112, 114, 105, 110, 99, 101, 107, 0, 19, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 2, 0, 0, 0, 0, 4, 102, 114, 97, 110, 107, 0, 12, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 0, 4, 107, 105, 110, 103, 0, 12, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 0, 4, 102, 114, 105, 122, 122, 121, 0, 12, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 0, 4, 115, 108, 105, 99, 107, 0, 19, 0, 0, 0, 16, 48, 0, 1, 0, 0, 0, 16, 49, 0, 0, 0, 0, 0, 0, 4, 122, 111, 101, 0, 19, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 2, 0, 0, 0, 0, 4, 98, 114, 111, 100, 121, 0, 19, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 1, 0, 0, 0, 0, 4, 116, 97, 103, 0, 19, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 1, 0, 0, 0, 0, 4, 116, 97, 115, 104, 97, 0, 12, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 0, 4, 108, 117, 99, 121, 0, 19, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 1, 0, 0, 0, 0, 4, 116, 114, 105, 99, 107, 121, 0, 26, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 2, 0, 0, 0, 16, 50, 0, 1, 0, 0, 0, 0, 4, 102, 114, 101, 115, 104, 0, 26, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 16, 49, 0, 2, 0, 0, 0, 16, 50, 0, 1, 0, 0, 0, 0, 4, 115, 112, 105, 107, 101, 0, 12, 0, 0, 0, 16, 48, 0, 0, 0, 0, 0, 0, 0, 4, 99, 111, 108, 108, 101, 99, 116, 67, 111, 105, 110, 115, 68, 117, 109, 109, 121, 68, 97, 116, 97, 0, 35, 4, 0, 0, 3, 48, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 49, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 0, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 0, 0, 0, 0, 0, 3, 49, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 50, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 0, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 0, 0, 0, 0, 0, 3, 50, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 51, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 0, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 0, 0, 0, 0, 0, 3, 51, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 49, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 24, 0, 0, 0, 0, 3, 52, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 53, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 22, 0, 0, 0, 0, 3, 53, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 54, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 19, 0, 0, 0, 0, 3, 54, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 55, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 15, 0, 0, 0, 0, 3, 55, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 51, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 14, 0, 0, 0, 0, 3, 56, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 56, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 10, 0, 0, 0, 0, 3, 57, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 49, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 7, 0, 0, 0, 0, 3, 49, 48, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 57, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 0, 0, 0, 0, 3, 49, 49, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 52, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 2, 0, 0, 0, 0, 3, 49, 50, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 50, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 1, 0, 0, 0, 0, 3, 49, 51, 0, 72, 0, 0, 0, 2, 110, 97, 109, 101, 0, 20, 0, 0, 0, 68, 85, 77, 77, 89, 95, 70, 82, 73, 69, 78, 68, 95, 78, 65, 77, 69, 95, 51, 0, 8, 104, 97, 115, 66, 101, 101, 110, 67, 111, 108, 108, 101, 99, 116, 101, 100, 0, 1, 16, 102, 97, 107, 101, 80, 114, 111, 103, 114, 101, 115, 115, 0, 0, 0, 0, 0, 0, 0, 3, 101, 97, 114, 110, 67, 117, 114, 114, 101, 110, 99, 121, 68, 97, 116, 97, 0, 5, 0, 0, 0, 0, 3, 105, 110, 65, 112, 112, 80, 117, 114, 99, 104, 97, 115, 101, 72, 105, 115, 116, 111, 114, 121, 0, 5, 0, 0, 0, 0, 16, 110, 117, 109, 98, 101, 114, 79, 102, 66, 114, 101, 97, 100, 67, 114, 117, 109, 98, 115, 83, 104, 111, 119, 110, 79, 110, 70, 114, 111, 110, 116, 80, 97, 103, 101, 0, 192, 6, 0, 0, 16, 97, 103, 101, 82, 101, 115, 116, 114, 105, 99, 116, 105, 111, 110, 73, 110, 112, 117, 116, 86, 101, 114, 115, 105, 111, 110, 0, 0, 0, 0, 0, 16, 97, 103, 101, 82, 101, 115, 116, 114, 105, 99, 116, 105, 111, 110, 73, 110, 112, 117, 116, 77, 111, 110, 116, 104, 0, 12, 0, 0, 0, 16, 97, 103, 101, 82, 101, 115, 116, 114, 105, 99, 116, 105, 111, 110, 73, 110, 112, 117, 116, 89, 101, 97, 114, 0, 207, 7, 0, 0, 3, 98, 114, 101, 97, 100, 99, 114, 117, 109, 98, 115, 0, 91, 0, 0, 0, 2, 108, 97, 115, 116, 68, 97, 105, 108, 121, 87, 111, 114, 100, 0, 6, 0, 0, 0, 67, 72, 65, 83, 69, 0, 18, 119, 101, 101, 107, 108, 121, 72, 117, 110, 116, 80, 101, 114, 105, 111, 100, 69, 120, 112, 105, 114, 101, 68, 97, 116, 101, 84, 105, 99, 107, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 108, 97, 115, 116, 77, 105, 115, 115, 105, 111, 110, 83, 101, 116, 0, 2, 0, 0, 0, 0, 2, 108, 97, 115, 116, 69, 118, 101, 110, 116, 84, 121, 112, 101, 83, 104, 111, 119, 110, 0, 5, 0, 0, 0, 78, 111, 110, 101, 0, 9, 108, 97, 115, 116, 69, 118, 101, 110, 116, 83, 104, 111, 119, 110, 84, 105, 109, 101, 115, 116, 97, 109, 112, 0, 128, 243, 119, 238, 124, 199, 255, 255, 2, 108, 97, 115, 116, 83, 101, 101, 110, 66, 117, 110, 100, 108, 101, 86, 101, 114, 115, 105, 111, 110, 0, 4, 0, 0, 0, 49, 46, 48, 0, 9, 108, 97, 115, 116, 84, 105, 109, 101, 65, 86, 105, 100, 101, 111, 70, 111, 114, 75, 101, 121, 115, 87, 97, 115, 83, 101, 101, 110, 0, 128, 243, 119, 238, 124, 199, 255, 255, 9, 119, 101, 108, 99, 111, 109, 101, 80, 97, 99, 107, 83, 116, 97, 114, 116, 84, 105, 109, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 16, 99, 117, 114, 114, 101, 110, 116, 73, 110, 116, 114, 111, 86, 105, 100, 101, 111, 65, 100, 80, 114, 105, 122, 101, 73, 110, 100, 101, 120, 0, 0, 0, 0, 0, 16, 99, 117, 114, 114, 101, 110, 116, 82, 97, 110, 100, 111, 109, 86, 105, 100, 101, 111, 65, 100, 80, 114, 105, 122, 101, 73, 110, 100, 101, 120, 0, 0, 0, 0, 0, 16, 99, 117, 114, 114, 101, 110, 116, 86, 105, 100, 101, 111, 65, 100, 80, 114, 105, 122, 101, 83, 101, 101, 100, 0, 224, 174, 48, 31, 16, 118, 105, 100, 101, 111, 115, 87, 97, 116, 99, 104, 101, 100, 83, 105, 110, 99, 101, 68, 97, 105, 108, 121, 75, 101, 121, 115, 0, 0, 0, 0, 0, 3, 102, 114, 105, 101, 110, 100, 83, 116, 97, 116, 117, 115, 0, 5, 0, 0, 0, 0, 8, 97, 108, 108, 111, 119, 83, 101, 108, 108, 72, 101, 97, 100, 115, 116, 97, 114, 116, 68, 117, 114, 105, 110, 103, 82, 117, 110, 0, 1, 8, 97, 108, 108, 111, 119, 83, 101, 108, 108, 83, 99, 111, 114, 101, 98, 111, 111, 115, 116, 101, 114, 68, 117, 114, 105, 110, 103, 82, 117, 110, 0, 1, 8, 104, 97, 115, 67, 111, 108, 108, 101, 99, 116, 101, 100, 70, 114, 111, 109, 70, 114, 105, 101, 110, 100, 115, 0, 0, 8, 104, 97, 115, 83, 104, 111, 119, 110, 67, 111, 108, 108, 101, 99, 116, 80, 111, 112, 117, 112, 0, 0, 8, 104, 97, 115, 83, 104, 111, 119, 110, 70, 97, 99, 101, 98, 111, 111, 107, 80, 111, 112, 117, 112, 0, 0, 8, 104, 97, 115, 83, 104, 111, 119, 110, 72, 111, 118, 101, 114, 98, 111, 97, 114, 100, 80, 111, 112, 117, 112, 0, 0, 8, 104, 97, 115, 83, 104, 111, 119, 110, 77, 105, 115, 115, 105, 111, 110, 73, 110, 116, 114, 111, 80, 111, 112, 117, 112, 0, 0, 8, 104, 97, 115, 83, 104, 111, 119, 110, 69, 110, 100, 71, 97, 109, 101, 77, 105, 115, 115, 105, 111, 110, 80, 111, 112, 117, 112, 0, 0, 8, 105, 115, 84, 117, 116, 111, 114, 105, 97, 108, 67, 111, 109, 112, 108, 101, 116, 101, 100, 0, 1, 8, 115, 104, 111, 117, 108, 100, 83, 104, 111, 119, 67, 111, 108, 108, 101, 99, 116, 80, 111, 112, 117, 112, 0, 0, 8, 115, 104, 111, 117, 108, 100, 83, 104, 111, 119, 70, 97, 99, 101, 98, 111, 111, 107, 80, 111, 112, 117, 112, 0, 0, 8, 115, 104, 111, 117, 108, 100, 83, 104, 111, 119, 72, 111, 118, 101, 114, 98, 111, 97, 114, 100, 80, 111, 112, 117, 112, 0, 1, 8, 115, 104, 111, 117, 108, 100, 83, 104, 111, 119, 77, 105, 115, 115, 105, 111, 110, 73, 110, 116, 114, 111, 100, 117, 99, 116, 105, 111, 110, 80, 111, 112, 117, 112, 0, 0, 8, 115, 104, 111, 117, 108, 100, 83, 104, 111, 119, 69, 110, 100, 71, 97, 109, 101, 77, 105, 115, 115, 105, 111, 110, 80, 111, 112, 117, 112, 0, 0, 16, 108, 97, 115, 116, 83, 104, 111, 119, 110, 84, 111, 112, 82, 117, 110, 73, 110, 116, 114, 111, 80, 111, 112, 117, 112, 86, 101, 114, 115, 105, 111, 110, 78, 117, 109, 98, 101, 114, 0, 0, 0, 0, 0, 8, 110, 101, 118, 101, 114, 65, 115, 107, 70, 111, 114, 82, 97, 116, 105, 110, 103, 0, 0, 2, 108, 97, 110, 103, 117, 97, 103, 101, 0, 1, 0, 0, 0, 0, 8, 115, 111, 117, 110, 100, 69, 102, 102, 101, 99, 116, 115, 69, 110, 97, 98, 108, 101, 100, 0, 1, 8, 109, 117, 115, 105, 99, 69, 110, 97, 98, 108, 101, 100, 0, 0, 8, 116, 111, 112, 82, 117, 110, 67, 104, 97, 108, 108, 101, 110, 103, 101, 114, 115, 69, 110, 97, 98, 108, 101, 100, 0, 1, 8, 114, 101, 109, 111, 116, 101, 78, 111, 116, 105, 102, 105, 99, 97, 116, 105, 111, 110, 115, 69, 110, 97, 98, 108, 101, 100, 0, 1, 16, 108, 111, 99, 97, 108, 78, 111, 116, 105, 102, 105, 99, 97, 116, 105, 111, 110, 115, 69, 110, 97, 98, 108, 101, 100, 0, 255, 255, 255, 255, 8, 104, 97, 115, 76, 111, 103, 103, 101, 100, 83, 116, 97, 116, 105, 99, 68, 97, 116, 97, 0, 0, 9, 108, 97, 115, 116, 76, 111, 103, 103, 101, 100, 68, 97, 105, 108, 121, 68, 97, 116, 97, 0, 128, 243, 119, 238, 124, 199, 255, 255, 1, 97, 110, 97, 108, 121, 116, 105, 99, 115, 83, 97, 109, 112, 108, 105, 110, 103, 75, 101, 121, 0, 0, 0, 0, 32, 175, 182, 224, 63, 9, 97, 98, 84, 101, 115, 116, 76, 97, 115, 116, 68, 97, 105, 108, 121, 69, 118, 101, 110, 116, 115, 82, 101, 112, 111, 114, 116, 68, 97, 116, 101, 0, 128, 243, 119, 238, 124, 199, 255, 255, 2, 97, 98, 84, 101, 115, 116, 80, 108, 97, 121, 101, 114, 83, 101, 101, 100, 0, 11, 0, 0, 0, 50, 50, 51, 53, 54, 55, 53, 56, 57, 51, 0, 2, 97, 98, 84, 101, 115, 116, 84, 97, 103, 68, 97, 116, 97, 0, 1, 0, 0, 0, 0, 2, 102, 108, 117, 114, 114, 121, 85, 115, 101, 114, 73, 100, 0, 1, 0, 0, 0, 0, 8, 104, 97, 115, 76, 111, 103, 103, 101, 100, 71, 97, 109, 101, 67, 101, 110, 116, 101, 114, 76, 111, 103, 105, 110, 0, 0, 8, 104, 97, 115, 76, 111, 103, 103, 101, 100, 70, 97, 99, 101, 98, 111, 111, 107, 76, 111, 103, 105, 110, 0, 0, 3, 104, 97, 115, 76, 111, 103, 103, 101, 100, 70, 108, 117, 114, 114, 121, 68, 97, 105, 108, 121, 69, 118, 101, 110, 116, 83, 111, 99, 105, 97, 108, 0, 5, 0, 0, 0, 0, 0])};
        
        // LIGNE CORRIGÉE : Utilisation de store.put() avec la bonne clé pour enregistrer les données.
        const putRequest = store.put(save100Data, "/idbfs/5bc32e1a17c4bdfdd5da57ab99ff0a2c/Save/cloud");
        
        putRequest.onsuccess = function () {
            location.reload(); // Recharger la page après l'insertion réussie
        };
        putRequest.onerror = function () {
            console.error("Erreur save 100.");
        };
    };
    request.onerror = function () {
        console.error("Erreur IndexedDB.");
    };
}

function doCleanData() {
    if (!confirm("Supprimer toutes les données ?")) return;
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
        if (!tabs[0]) {
            showStatus("Aucun onglet actif", false);
            return;
        }
        chrome.scripting.executeScript({
            target: { tabId: tabs[0].id },
            func: cleanAllData
        }, (results) => {
            if (chrome.runtime.lastError) {
                showStatus("Erreur", false);
            } else {
                showStatus("Données supprimées", true);
            }
        });
    });
}

function cleanAllData() {
    // Nettoyage de l'IndexedDB (où Unity stocke souvent les données)
    const request = indexedDB.open("/idbfs");
    request.onsuccess = function (event) {
        const db = event.target.result;
        const transaction = db.transaction(["FILE_DATA"], "readwrite");
        const store = transaction.objectStore("FILE_DATA");
        const clearRequest = store.clear();
        clearRequest.onsuccess = function () {
            // Nettoyage de localStorage (parfois utilisé aussi)
            if (typeof localStorage !== 'undefined') {
                localStorage.removeItem('SaveData');
                localStorage.removeItem('UnitySettings');
            }
            location.reload();
        };
        clearRequest.onerror = function () {
            console.error("Erreur suppression IndexedDB.");
        };
    };
    request.onerror = function () {
        console.error("Erreur IndexedDB.");
    };
}


// ===============================
// SUBWAY CITY SELECTOR
// ===============================

function setupSubwayCityEventListeners() {
    const cityLinks = document.querySelectorAll('.city-link');

    cityLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            addButtonFeedback(link);
            const url = link.dataset.url;
            
            if (url) {
                // Ouvre l'URL de la ville dans un nouvel onglet
                chrome.tabs.create({ url: url });
                showStatus(`Ouverture de la ville : ${link.textContent.trim()}`, true);
            }
        });
    });
}


// ================================
// ZQSD FEATURES
// ================================

function setupZqsdEventListeners() {
    const activateBtn = document.getElementById('activateZqsd');
    const deactivateBtn = document.getElementById('deactivateZqsd');

    if (activateBtn) {
        activateBtn.addEventListener('click', function() {
            addButtonFeedback(activateBtn);
            activateZqsd();
        });
    }

    if (deactivateBtn) {
        deactivateBtn.addEventListener('click', function() {
            addButtonFeedback(deactivateBtn);
            deactivateZqsd();
        });
    }
}

function activateZqsd() {
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
        if (!tabs[0]) {
            showStatus("Aucun onglet actif", false);
            return;
        }
        chrome.tabs.sendMessage(tabs[0].id, { action: "activateZqsd" }, (response) => {
            if (chrome.runtime.lastError) {
                showStatus("Rechargez la page cible", false);
            } else {
                showStatus("ZQSD/WASD Activé !", true);
            }
        });
    });
}

function deactivateZqsd() {
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
        if (!tabs[0]) {
            showStatus("Aucun onglet actif", false);
            return;
        }
        chrome.tabs.sendMessage(tabs[0].id, { action: "deactivateZqsd" }, (response) => {
            if (chrome.runtime.lastError) {
                showStatus("Rechargez la page cible", false);
            } else {
                showStatus("ZQSD/WASD Désactivé !", true);
            }
        });
    });
}

// ================================
// RESOLUTION FEATURES
// ================================

function setupResolutionEventListeners() {
    const activateBtn = document.getElementById('activateResolution');
    const deactivateBtn = document.getElementById('deactivateResolution');

    if (activateBtn) {
        activateBtn.addEventListener('click', function() {
            addButtonFeedback(activateBtn);
            toggleResolution(true);
        });
    }

    if (deactivateBtn) {
        deactivateBtn.addEventListener('click', function() {
            addButtonFeedback(deactivateBtn);
            toggleResolution(false);
        });
    }
}

function toggleResolution(shouldActivate) {
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
        if (!tabs[0]) {
            showStatus("Aucun onglet actif", false);
            return;
        }
        
        chrome.tabs.sendMessage(tabs[0].id, { 
            action: "toggleResolution", 
            activate: shouldActivate
        }, (response) => {
            if (chrome.runtime.lastError) {
                showStatus("Rechargez la page pour la résolution", false);
            } else if (response && response.success) {
                updateResolutionStatus(response.enabled);
                showStatus(shouldActivate ? "Résolution 608x1080 forcée !" : "Résolution normale rétablie. Rechargez la page.", true);
                
                // Si on désactive, le content script va recharger la page, pas besoin de le faire ici.
            }
        });
    });
}

function loadResolutionState() {
    chrome.runtime.sendMessage({ action: "getResolutionState" }, (response) => {
        if (chrome.runtime.lastError) return;
        if (response && typeof response.active === 'boolean') {
            updateResolutionStatus(response.active);
        }
    });
}

function updateResolutionStatus(isActive) {
    const statusEl = document.getElementById('resolutionStatus');
    if (statusEl) {
        isResolutionActive = isActive;
        if (isActive) {
            statusEl.textContent = "ACTIF";
            statusEl.classList.remove('res-inactive');
            statusEl.classList.add('res-active');
        } else {
            statusEl.textContent = "INACTIF";
            statusEl.classList.remove('res-active');
            statusEl.classList.add('res-inactive');
        }
    }
}

// ================================
// THEME FEATURES
// ================================

function setupThemeEventListeners() {
    const themeCards = document.querySelectorAll('.theme-card');

    themeCards.forEach(card => {
        card.addEventListener('click', function() {
            const theme = card.dataset.theme;
            if (theme) {
                setTheme(theme);
                addButtonFeedback(card);
            }
        });
    });
}

function setTheme(theme) {
    chrome.runtime.sendMessage({ 
        action: "saveTheme", 
        theme: theme 
    }, (response) => {
        if (chrome.runtime.lastError) return;
        if (response && response.success) {
            applyThemeToPopup(theme);
            showStatus(`Thème changé à ${theme.charAt(0).toUpperCase() + theme.slice(1)}`, true);
            
            // Envoyer un message au script de contenu pour mettre à jour le thème du timer
            chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
                if (tabs[0]) {
                    chrome.tabs.sendMessage(tabs[0].id, { 
                        action: "updateTheme", 
                        theme: theme 
                    });
                }
            });
        }
    });
}

function loadTheme() {
    chrome.runtime.sendMessage({ action: "getTheme" }, (response) => {
        if (chrome.runtime.lastError) return;
        if (response && response.theme) {
            applyThemeToPopup(response.theme);
        }
    });
}

function applyThemeToPopup(theme) {
    document.body.dataset.theme = theme;
    
    // Mettre à jour l'état actif des cartes
    const themeCards = document.querySelectorAll('.theme-card');
    themeCards.forEach(card => {
        card.classList.remove('active');
        if (card.dataset.theme === theme) {
            card.classList.add('active');
        }
    });
}

// ================================
// UTILITY FUNCTIONS
// ================================

function addButtonFeedback(button) {
    button.style.transform = 'scale(0.95)';
    setTimeout(() => {
        button.style.transform = '';
    }, 150);
}

function showStatus(message, success) {
    const status = document.getElementById('status');
    if (status) {
        status.textContent = message;
        status.className = `status ${success ? 'success' : 'error'}`;
        status.style.opacity = '1';
        status.style.display = 'block';
        setTimeout(() => {
            status.style.opacity = '0';
            setTimeout(() => {
                status.style.display = 'none';
            }, 300); // 300ms pour correspondre à la transition
        }, 3000); // Reste visible pendant 3 secondes
    }
}